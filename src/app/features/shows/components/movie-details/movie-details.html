<!-- Movie detail hero styled to match the provided reference using Tailwind -->
<div class="relative w-full min-h-[60vh] text-white border-b border-neutral-700 overflow-hidden">
  <!-- async pipe provides 'movie' -->
  <ng-container *ngIf="movie$ | async as movie; else loading">
    <!-- Full-bleed backdrop image, blurred and slightly scaled -->
    <div
      class="absolute inset-0 bg-cover bg-center transform scale-105 filter blur-sm"
      [style.backgroundImage]="'url(' + (movie.background_image_url ?? movie.poster_url) + ')'"
      aria-hidden="true"
    ></div>

    <!-- dark gradient overlay for mood -->
    <div class="absolute inset-0 bg-gradient-to-t from-black/85 via-black/70 to-black/60"></div>

    <!-- Content container -->
    <div class="relative z-10 max-w-7xl mx-auto px-6 py-16">
      <!-- top-right Share button -->
      <div class="absolute top-6 right-6 z-20">
        <button
          (click)="share(movie)"
          class="flex items-center gap-2 bg-black/40 backdrop-blur text-white px-3 py-2 rounded-md hover:bg-black/30"
          aria-label="Share"
        >
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 8a3 3 0 10-2.83-4.01M9 16l6-4m0 0l-6-4m6 4l6 4" />
          </svg>
          <span class="hidden sm:inline">Share</span>
        </button>
      </div>

      <!-- Grid: poster left, details right -->
      <div class="grid grid-cols-1 lg:grid-cols-12 gap-10 items-start relative z-20">
        <!-- Poster card -->
        <div class="lg:col-span-3 flex justify-center lg:justify-start">
          <div class="rounded-2xl overflow-hidden bg-neutral-900 shadow-2xl w-[220px] md:w-[260px] ring-1 ring-black/40">
            <div class="relative">
              <img
                [src]="movie.poster_url"
                [alt]="movie.title + ' poster'"
                class="w-full h-[360px] object-cover"
                loading="lazy"
              />

              <!-- small trailer chip (optional) -->
              <button
                class="absolute left-4 top-4 bg-black/60 text-white px-3 py-1 rounded-md flex items-center gap-2 hover:bg-black/50"
                aria-label="Open trailers"
              >
                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M8 5v14l11-7z" />
                </svg>
                <span class="text-sm">Trailers</span>
              </button>

              <!-- bottom label -->
              <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/90 to-transparent text-center py-2 text-sm">
                <span class="text-xs md:text-sm">In cinemas</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Main details -->
        <div class="lg:col-span-9">
          <!-- Title -->
          <h1 class="text-3xl md:text-4xl font-extrabold mb-4 drop-shadow-lg">{{ movie.title }}</h1>

          <!-- rating pill + rate button -->
          <div class="flex flex-wrap items-center gap-4 mb-4">
            <div class="flex items-center gap-4 bg-black/40 px-4 py-3 rounded-lg">
              <div class="flex items-center gap-3 text-pink-400 font-semibold">
                <!-- star -->
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 fill-current" viewBox="0 0 24 24">
                  <path d="M12 .587l3.668 7.431L24 9.748l-6 5.847L19.335 24 12 19.897 4.665 24 6 15.595 0 9.748l8.332-1.73z" />
                </svg>

                <!-- rating or fallback -->
                <span class="text-lg">
                  {{ movie.rating ? (movie.rating + '/10') : 'Not Yet Rated' }}
                </span>
              </div>

            </div>

            <button class="bg-white text-black px-4 py-2 rounded-md font-medium">Rate now</button>
          </div>

          <!-- metadata (runtime, genres, age, release date) -->
          <div class="flex flex-wrap items-center gap-3 text-sm text-neutral-300 mb-4">
            <div>{{ movie.duration + 'm' }}</div>
            <div>•</div>
            <div>{{ (movie.genre )?.join(', ') }}</div>
            <div>•</div>
            <div>{{ movie.certificate ?? 'UA16+' }}</div>
            <div>•</div>
            <div>{{ movie.release_date | date:"dd-MM-yyyy"}}</div>
          </div>

          <!-- chips: formats + languages -->
          <div class="flex flex-wrap gap-3 mb-6">
            <span class="bg-neutral-800 text-neutral-200 px-3 py-2 rounded-md text-xs">
              {{ (movie.format ?? movie.format ?? ['2D']).join(', ') | uppercase }}
            </span>

            <span *ngIf="movie.language || movie.language" class="bg-neutral-800 text-neutral-200 px-3 py-2 rounded-md text-xs">
              {{ (movie.language)?.join(', ') }}
            </span>
          </div>

          <!-- CTA -->
          <div>
            <button (click)="bookTickets(movie)"
              class="bg-red-500 hover:bg-red-600 text-white px-8 py-3 rounded-xl text-lg font-semibold shadow-lg">
              Book tickets
            </button>
          </div>
        </div>
      </div>
    </div>
  </ng-container>

  <!-- Loading skeleton -->
  <ng-template #loading>
    <section class="relative w-full min-h-[60vh] bg-gradient-to-t from-neutral-900 to-neutral-800 text-neutral-400 flex items-center justify-center">
      <div class="text-center">
        <div class="animate-pulse h-8 w-64 bg-gray-700 mb-4 rounded"></div>
        <div class="animate-pulse h-4 w-96 bg-gray-700 mb-2 rounded"></div>
        <div class="animate-pulse h-4 w-72 bg-gray-700 rounded"></div>
      </div>
    </section>
  </ng-template>
</div>